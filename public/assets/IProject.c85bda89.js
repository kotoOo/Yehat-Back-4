var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(t,o,i)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[o]=i;"undefined"!=typeof require&&require;import{f as a,l as s,D as c,z as l,A as n,o as m,j as d,E as p,x as u,g as b,v as g,C as f,J as y,F as v,k as C,G as k}from"./index.154289d4.js";import{_ as j}from"./stage2.41e6de3a.js";const{copyToClipboard:h,Notify:w,format:I}=Quasar,D={props:{item:Object},setup(e){const a=reactive({page:"outline",name:""});watch(e.item,(e=>{a.name=e.project0.name}),{immediate:!0});const s=computed((()=>Object.keys(e.item.project0members.roster).map((e=>{if(!ecs.root[e]){let t=ecs.create("MemberCard0",{id:e});core.log(`[IProject.vue]MemberCard0 created ${e}`),t.nft0.resolve()}return ecs.root[e]}))));return{state:a,copyID:()=>{h(e.item.id),w.create("Coppied ID: "+e.item.id)},copyFounder:()=>{h(e.item.project0status.founderID),w.create("Coppied ID: "+e.item.project0status.founderID)},open:()=>{const t=ecs.root["f64fa362-6fab-498a-88de-f4bddddea398"],o=t.c.entityEdit0;o&&(o.connections.target=e.item.id,t.ziiTable.show=!0,e.item.dialog0.show=!1,t.cameraMoveToItem(o))},register:async()=>{const{code:a,details:s}=await yehat.ex(((e,a)=>{for(var s in a||(a={}))o.call(a,s)&&r(e,s,a[s]);if(t)for(var s of t(a))i.call(a,s)&&r(e,s,a[s]);return e})({cmd:"project0.register"},e.item));"ok"==a?w.create("Project registered!"):w.create(s)},pull:async()=>{const{code:t,details:o,entities:i}=await yehat.ex({cmd:"ecs.enter",rel:e.item.id}),r=ecs.boot(i,{dropNulls:!0});for(let e of r)e.saveLocal&&e.saveLocal.save();w.create(`${i.length} Entities piped in.`)},box:()=>{const{roster:t,stat:o}=ecs.box([e.item]);console.log("Roster:",t),console.table(o);const i=JSON.stringify({roster:t,stat:o,meta:{name:"Cargo1",type:"Yehat JSON Container",version:"1.0",by:core.yehat.auth.memberID,on:localStorage.deviceID,dtCreated:+new Date}});h(i).then((()=>{w.create(`${I.humanStorageSize(i.length)} coppied.`)})).catch((e=>w.create("Clipboard copy error.")))},memberCards:s,identity:computed((()=>ecs.root.useID.slot0.entity))}}};l("data-v-caf4503a");const x={class:"widget-caption"},_=k("Project Settings "),O={class:"highlight"},R={class:"column full-height no-wrap"},P={class:"col scroll"},q={class:"c-item row items-center"},M=k("ID: "),S={class:"c-item row items-center"},E={key:0,class:"c-item row items-center"},N=k("Founder: "),B={class:"c-item row items-center"},F=k("Name: "),$={class:"row no-wrap items-center"},z={class:"col"},A={class:"col-auto"},J={key:0,class:"use-id"},L=[k("In slot: "),d("b",null,"Use ID",-1)],T={class:"row no-wrap items-center"},U={class:"col-auto row q-gutter-x-xs items-center"},G=k("Admin"),Q=k("Dev"),V=k("COM"),Y=k("Banish"),H={class:"col-autowidget-footer"},K={class:"row items-center justify-center q-gutter-x-xs"},W=k("Add"),X={class:"row items-center justify-center q-gutter-x-xs"},Z=k("Outline"),ee=k("Members"),te=k("Channel");n();var oe=j(D,[["render",function(e,t,o,i,r,l){const n=a("BtnMove0"),k=a("q-space"),j=a("q-btn"),h=a("MemberCard0"),w=a("btn0"),I=a("Chat0"),D=a("picker0"),oe=a("IDialog0");return m(),s(oe,{item:o.item,scroll:!1,"btn-close":""},{header:c((()=>[d("header",x,[_,d("span",O,p(o.item.project0.name),1)])])),headerButtons:c((()=>[u(n,{item:o.item},null,8,["item"])])),default:c((()=>[d("div",R,[d("div",P,["outline"===i.state.page?(m(),b(v,{key:0},[d("div",q,[d("div",null,[M,d("b",null,p(o.item.id),1)]),u(k),u(j,{icon:"content_copy",dense:"",flat:"",onClick:i.copyID},null,8,["onClick"])]),d("div",S,[d("div",null,"Status: "+p(o.item.project0status.dtRegistered?"Public":"Local"),1)]),o.item.project0status.founderID?(m(),b("div",E,[d("div",null,[N,d("b",null,p(o.item.project0status.founderID),1)]),u(k),u(j,{icon:"content_copy",dense:"",flat:"",onClick:i.copyFounder},null,8,["onClick"])])):g("",!0),d("div",B,[d("div",null,[F,f(d("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.state.name=e)},null,512),[[y,i.state.name]])])]),d("div",null,[u(j,{label:"Open in Entity Editor",onClick:i.open},null,8,["onClick"]),o.item.project0status.dtRegistered?g("",!0):(m(),s(j,{key:0,label:"Register",onClick:i.register},null,8,["onClick"])),o.item.project0status.dtRegistered?(m(),s(j,{key:1,label:"Pull",onClick:i.pull},null,8,["onClick"])):g("",!0),u(j,{onClick:i.box,label:"Box"},null,8,["onClick"])])],64)):g("",!0),"members"===i.state.page?(m(!0),b(v,{key:1},C(i.memberCards,((e,t)=>(m(),b("div",{key:t},[d("div",$,[d("div",z,[u(h,{view:"projectMember",item:e},null,8,["item"])]),d("div",A,[i.identity&&i.identity.id===e.id?(m(),b("div",J,L)):g("",!0)])]),d("div",T,[u(k),d("div",U,[u(w,{tier:o.item.project0members.hasRole(e.id,"admin")?"standard":"proto",onClick:t=>o.item.project0members.toggleRole(e.id,"admin")},{default:c((()=>[G])),_:2},1032,["tier","onClick"]),u(w,{tier:o.item.project0members.hasRole(e.id,"dev")?"standard":"proto",onClick:t=>o.item.project0members.toggleRole(e.id,"dev")},{default:c((()=>[Q])),_:2},1032,["tier","onClick"]),u(w,{tier:o.item.project0members.hasRole(e.id,"com")?"premium":"proto",onClick:t=>o.item.project0members.toggleRole(e.id,"com")},{default:c((()=>[V])),_:2},1032,["tier","onClick"]),u(w,{tier:"monkeys",onClick:t=>o.item.project0members.banish(e.id)},{default:c((()=>[Y])),_:2},1032,["onClick"])])])])))),128)):g("",!0),"channel"===i.state.page?(m(),s(I,{key:2,item:o.item},null,8,["item"])):g("",!0)]),d("footer",H,[d("div",K,["members"===i.state.page?(m(),s(D,{key:0,item:o.item,query:`v.memberCard0 && !ecs.root['${o.item.id}'].project0members.isMember(v.id)`,onPick:o.item.project0members.add},{default:c((()=>[W])),_:1},8,["item","query","onPick"])):g("",!0)]),d("div",X,[u(w,{tier:"outline"===i.state.page?"premium":"poormans",onClick:t[1]||(t[1]=e=>i.state.page="outline")},{default:c((()=>[Z])),_:1},8,["tier"]),u(w,{tier:"members"===i.state.page?"premium":"poormans",onClick:t[2]||(t[2]=e=>i.state.page="members")},{default:c((()=>[ee])),_:1},8,["tier"]),u(w,{tier:"channel"===i.state.page?"premium":"poormans",onClick:t[3]||(t[3]=e=>i.state.page="channel")},{default:c((()=>[te])),_:1},8,["tier"])])])])])),_:1},8,["item"])}],["__scopeId","data-v-caf4503a"]]);export{oe as default};
