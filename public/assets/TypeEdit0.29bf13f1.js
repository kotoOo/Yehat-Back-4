import{f as resolveComponent,l as createBlock,D as withCtx,z as pushScopeId,A as popScopeId,o as openBlock,x as createVNode,j as createBaseVNode,C as withDirectives,J as vModelText,E as toDisplayString,g as createElementBlock,F as Fragment,k as renderList,t as normalizeClass,G as createTextVNode,v as createCommentVNode}from"./index.154289d4.js";import{_ as _export_sfc}from"./stage2.41e6de3a.js";var TypeEdit0_vue_vue_type_style_index_0_scoped_true_lang=".compo-item header[data-v-039ed043] {\n  color: #feae34;\n}\n.compo-item footer[data-v-039ed043] {\n  font-size: 12px;\n  color: #346a99;\n}\n.compo-item.matched[data-v-039ed043] {\n  background: #1a5fd7;\n}\n.compo-item.matched header[data-v-039ed043] {\n  color: white;\n}\n.compo-item.matched footer[data-v-039ed043] {\n  color: #70a4ff;\n}\n.input-name[data-v-039ed043] {\n  border: 0;\n  width: 100%;\n  background: transparent;\n  color: #ccc;\n}\n.input-details[data-v-039ed043] {\n  border: 0;\n  width: 100%;\n  background: transparent;\n  color: #ccc;\n}\n.search[data-v-039ed043] {\n  border: 0;\n  width: 100%;\n  background: #3f2832;\n  color: #d87644;\n}\n.editor[data-v-039ed043] {\n  background: transparent;\n  color: #b5c1c9;\n  font: 12px monospace;\n  /* font-variant: small-caps; */\n  resize: none;\n}";ecs.define("typeEdit0",{name:"",hull:{},details:"",cursor:0,showCompos:!0,showNewCompo:!1,search:"",newCompoCode:""},{details:"TypeEdit0 Configuration."}),ecs.define("compoFame0",{roster:{},inc:e=>t=>(e.compoFame0.roster[t]=e.compoFame0.roster[t]?e.compoFame0.roster[t]+1:1,!0)},{details:"ECS Components Local Fame"}),ecs.declareType("TypeEdit0",[ecs.compo.typeEdit0(),ecs.compo.compoFame0(),ecs.compo.dialog0(),ecs.compo.meta({type:"Dialog",name:"Type Edit MK 0"}),ecs.compo.connections({master:null}),ecs.compo.located(),ecs.compo.grid0user({defaultRecord:{pos:[0,0],size:[25,19]}}),ecs.compo.saveLocal({typeEdit0:!0,compoFame0:!0}),ecs.compo.tier({base:"poormans"}),ecs.compo.item({baseComponent:"TypeEdit0"}),ecs.compo.actions({defineCompo:item=>()=>{const applyTabs=e=>t=>t.split("\n").map((t=>" ".repeat(2*e)+t)).join("\n"),gen0=`${props.item.typeEdit0.search}: {\n  hull: {\n${applyTabs(2)(item.typeEdit0.newCompoCode)}\n  },\n  details: "${item.typeEdit0.newCompoDetails}"\n}`;ecs.bootSource({compo:[...eval(`(${gen0})`)]}),Quasar.Notify.create("Defined!")}})],{details:"Dear Norton MK 0"});const _sfc_main={props:{item:Object,loadType:String},setup(e){const t=computed((()=>{const t=e.item.typeEdit0.search.trim();return Object.keys(ecs.compopedia).map((o=>{const i=""!==t&&!!~o.indexOf(t);return{id:o,caption:o,details:ecs.compopedia[o].details,selected:e.item.typeEdit0.hull[o],isMatched:i}})).sort(((o,i)=>{if(t){const a=!!~o.caption.indexOf(t),s=!!~i.caption.indexOf(t);if(a!==s)return s-a;const d=e.item.compoFame0.roster[o.id]||0,c=e.item.compoFame0.roster[i.id]||0;return d!==c?c-d:o.caption.localeCompare(i.caption)}{const t=e.item.compoFame0.roster[o.id]||0,a=e.item.compoFame0.roster[i.id]||0;return t!==a?a-t:o.caption.localeCompare(i.caption)}}))})),o=computed((()=>{const t=Object.keys(e.item.typeEdit0.hull).map((e=>`    ecs.compo.${e}()`)).join(",\n");return`${e.item.typeEdit0.name}: {\n  hull: () => [\n${t}\n  ],\n  details: "${e.item.typeEdit0.details}"\n}`})),i=reactive({code:"",ta:null});return{save:()=>{core.log("Save clicked")},compos:t,toggleUseCompo:t=>{e.item.typeEdit0.hull[t]?delete e.item.typeEdit0.hull[t]:e.item.typeEdit0.hull[t]={}},output:o,copy:()=>{const e=o.value;Quasar.copyToClipboard(e),Quasar.Notify.create(`Coppied Type Definition, ${Quasar.format.humanStorageSize(e.length)}`)},goCompos:()=>{core.log("Add clicked."),e.item.typeEdit0.showCompos=!0,e.item.typeEdit0.showNewCompo=!1},goNewCompo:()=>{e.item.typeEdit0.showCompos=!1,e.item.typeEdit0.showNewCompo=!0},state:i,keydown:e=>t=>{if("Tab"===t.code){if(t.target){const{selectionStart:o,selectionEnd:a}=t.target,s=pure.indexToCR(i[e],o),d=pure.indexToCR(i[e],a);Math.abs(s[1]-d[1]);const c=i[e].split("\n"),n=c.slice(0,s[1]),r=c.slice(d[1]+1),l=t.shiftKey?e=>" "===e[0]&&" "===e[1]?e.slice(2):e:e=>`  ${e}`,p=[...n,...c.slice(s[1],d[1]+1).map(l),...r];i[e]=p.join("\n");const m=[n.join("\n").length,i[e].length-r.join("\n").length];nextTick((()=>{o==a?t.target.setSelectionRange(o+2,o+2):t.target.setSelectionRange(m[0]+1,m[1]-1)}))}return t.preventDefault(),void t.stopPropagation()}},copyNewCompo:()=>{const t=`${e.item.typeEdit0.search}: {\n  hull: {\n${(o=2,e=>e.split("\n").map((e=>" ".repeat(2*o)+e)).join("\n"))(e.item.typeEdit0.newCompoCode)}\n  },\n  details: "${e.item.typeEdit0.newCompoDetails}"\n}`;var o;return Quasar.copyToClipboard(t),Quasar.Notify.create(`Coppied Type Definition, ${pure.humanStorageSize(t.length)}`),t},fameCompo:t=>{e.item.compoFame0.inc(t),e.item.saveLocal.save(),Quasar.Notify.create(`Fame compo ${t} +1`)}}}};pushScopeId("data-v-039ed043");const _hoisted_1=createTextVNode(" Type Edit MK 0 "),_hoisted_2={class:"column no-wrap full-height"},_hoisted_3={class:"row no-wrap col"},_hoisted_4={class:"col-6"},_hoisted_5={class:"column no-wrap full-height"},_hoisted_6={class:"col-6 scroll"},_hoisted_7=createBaseVNode("header",null,"Name",-1),_hoisted_8=createBaseVNode("header",null,"Details",-1),_hoisted_9={class:"col-6 scroll"},_hoisted_10=createBaseVNode("header",null,"Output",-1),_hoisted_11={class:"output js"},_hoisted_12={class:"col-6"},_hoisted_13={class:"column no-wrap full-height"},_hoisted_14={class:"col-auto"},_hoisted_15={class:"widget-body scroll col"},_hoisted_16={key:0},_hoisted_17={style:{flex:"0 0 84px"}},_hoisted_18={style:{flex:"1"}},_hoisted_19={class:"col-auto"},_hoisted_20={key:1,class:"column no-wrap full-height"},_hoisted_21={class:"col"},_hoisted_22={style:{flex:"0 0 100px","margin-top":"4px"}},_hoisted_23={class:"col-auto row no-wrap q-gutter-x-xs"},_hoisted_24=createTextVNode("Save"),_hoisted_25=createTextVNode("Copy"),_hoisted_26=createTextVNode("Copy New Compo"),_hoisted_27=createTextVNode("Define!"),_hoisted_28=createTextVNode("New Compo"),_hoisted_29=createTextVNode("Compo");function _sfc_render(e,t,o,i,a,s){const d=resolveComponent("BtnResize0"),c=resolveComponent("BtnMove0"),n=resolveComponent("btn0"),r=resolveComponent("q-space"),l=resolveComponent("IDialog0");return openBlock(),createBlock(l,{item:o.item,scroll:!1,"btn-close":"",itemless:""},{header:withCtx((()=>[_hoisted_1])),headerButtons:withCtx((()=>[createVNode(d,{item:o.item,dir:"w"},null,8,["item"]),createVNode(d,{item:o.item,dir:"a"},null,8,["item"]),createVNode(d,{item:o.item,dir:"s"},null,8,["item"]),createVNode(d,{item:o.item,dir:"d"},null,8,["item"]),createVNode(c,{item:o.item},null,8,["item"])])),default:withCtx((()=>[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[createBaseVNode("div",_hoisted_5,[createBaseVNode("div",_hoisted_6,[_hoisted_7,withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.item.typeEdit0.name=e),class:"input-name"},null,512),[[vModelText,o.item.typeEdit0.name]]),_hoisted_8,withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.item.typeEdit0.details=e),class:"input-details"},null,512),[[vModelText,o.item.typeEdit0.details]])]),createBaseVNode("div",_hoisted_9,[_hoisted_10,createBaseVNode("div",_hoisted_11,[createBaseVNode("pre",null,toDisplayString(i.output),1)])])])]),createBaseVNode("div",_hoisted_12,[createBaseVNode("div",_hoisted_13,[createBaseVNode("header",_hoisted_14,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.item.typeEdit0.search=e),class:"search"},null,512),[[vModelText,o.item.typeEdit0.search]])]),createBaseVNode("div",_hoisted_15,[o.item.typeEdit0.showCompos?(openBlock(),createElementBlock("div",_hoisted_16,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.compos,((e,t)=>(openBlock(),createElementBlock("div",{key:t,class:normalizeClass(["row no-wrap compo-item items-center",{matched:e.isMatched}])},[createBaseVNode("div",_hoisted_17,[createVNode(n,{tier:e.selected?"premium":"proto",onClick:t=>i.toggleUseCompo(e.id)},{default:withCtx((()=>[createTextVNode(toDisplayString(e.selected?"Used":"Use"),1)])),_:2},1032,["tier","onClick"])]),createBaseVNode("div",_hoisted_18,[createBaseVNode("header",null,toDisplayString(e.caption),1),createBaseVNode("footer",null,toDisplayString(e.details),1)]),createBaseVNode("div",_hoisted_19,[createVNode(n,{tier:"poormans",onClick:t=>i.fameCompo(e.id)},{default:withCtx((()=>[createTextVNode(toDisplayString(o.item.compoFame0.roster[e.id]?o.item.compoFame0.roster[e.id]:0),1)])),_:2},1032,["onClick"])])],2)))),128))])):createCommentVNode("",!0),o.item.typeEdit0.showNewCompo?(openBlock(),createElementBlock("div",_hoisted_20,[createBaseVNode("div",_hoisted_21,[withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.item.typeEdit0.newCompoCode=e),autofocus:"",class:"editor fit",type:"code",onKeydown:t[4]||(t[4]=e=>i.keydown("code")(e)),ref:e=>i.state.ta=e},null,544),[[vModelText,o.item.typeEdit0.newCompoCode]])]),createBaseVNode("div",_hoisted_22,[withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.item.typeEdit0.newCompoDetails=e),autofocus:"",class:"editor fit",type:"code",onKeydown:t[6]||(t[6]=e=>i.keydown("details")(e)),ref:e=>i.state.refDetails=e},null,544),[[vModelText,o.item.typeEdit0.newCompoDetails]])])])):createCommentVNode("",!0)])])])]),createBaseVNode("footer",_hoisted_23,[createVNode(n,{tier:"proto",onClick:i.save},{default:withCtx((()=>[_hoisted_24])),_:1},8,["onClick"]),createVNode(n,{tier:"premium",onClick:i.copy},{default:withCtx((()=>[_hoisted_25])),_:1},8,["onClick"]),createVNode(r),createVNode(n,{tier:"epic",onClick:i.copyNewCompo},{default:withCtx((()=>[_hoisted_26])),_:1},8,["onClick"]),createVNode(n,{tier:"standard",onClick:o.item.actions.defineCompo},{default:withCtx((()=>[_hoisted_27])),_:1},8,["onClick"]),createVNode(n,{tier:o.item.typeEdit0.showNewCompo?"premium":"proto",onClick:i.goNewCompo},{default:withCtx((()=>[_hoisted_28])),_:1},8,["tier","onClick"]),createVNode(n,{tier:o.item.typeEdit0.showCompos?"premium":"proto",onClick:i.goCompos},{default:withCtx((()=>[_hoisted_29])),_:1},8,["tier","onClick"])])])])),_:1},8,["item"])}popScopeId();var TypeEdit0=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-039ed043"]]);export{TypeEdit0 as default};
