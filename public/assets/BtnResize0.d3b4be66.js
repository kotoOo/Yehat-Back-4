import{B as e,C as i,g as t,t as r,o as s}from"./index.154289d4.js";import{_ as o}from"./stage2.41e6de3a.js";var d=o({props:{item:Object,dir:String},setup(e){const i=reactive({startPos:[],startSize:[]});return{pan:({isFirst:t,isFinal:r,offset:s})=>{if(t){const{gridID:t}=e.item.grid0user?e.item.grid0user:{gridID:null};i.startPos=t?ecs.root[t].grid0.roster[e.item.id]?ecs.root[t].grid0.roster[e.item.id].pos:e.item.grid0user.defaultRecord.pos:e.item.located?e.item.located.pos:[0,0],i.startSize=t?ecs.root[t].grid0.roster[e.item.id]?ecs.root[t].grid0.roster[e.item.id].size:e.item.grid0user.defaultRecord.size:e.item.located?e.item.located.size:[10,15],e.item.grid0user.isMoving=!0}if(!t){const{gridID:t}=e.item.grid0user?e.item.grid0user:{gridID:null};if(t){const r=ecs.root[t];if(r.grid0.roster[e.item.id]||(r.grid0.roster[e.item.id]=e.item.grid0user?e.item.grid0user.defaultRecord:{pos:(e.item.located?e.item.located.pos:[0,0])||[0,0],size:(e.item.located?e.item.located.size:[10,15])||[10,15]}),"a"===e.dir){const t=Math.max(i.startSize[0]-Math.floor(s.x/(r.space2.grid[0]+r.space2.grid[2])),1);r.grid0.roster[e.item.id].pos=[i.startPos[0]+i.startSize[0]-t,i.startPos[1]],r.grid0.roster[e.item.id].size=[t,i.startSize[1]]}else if("w"===e.dir){const t=Math.max(i.startSize[1]-Math.floor(s.y/(r.space2.grid[1]+r.space2.grid[3])),1);r.grid0.roster[e.item.id].pos=[i.startPos[0],i.startPos[1]+i.startSize[1]-t],r.grid0.roster[e.item.id].size=[i.startSize[0],t],console.log("new pos",i.startPos[0],i.startPos[1]+i.startSize[1]-t),console.log("new size",i.startSize[0],t)}else if("d"===e.dir){const t=i.startSize[0]+Math.floor(s.x/(r.space2.grid[0]+r.space2.grid[2]));r.grid0.roster[e.item.id].size=[t,i.startSize[1]]}else if("s"===e.dir){const t=i.startSize[1]+Math.floor(s.y/(r.space2.grid[1]+r.space2.grid[3]));r.grid0.roster[e.item.id].size=[i.startSize[0],t]}core.log(`[BtnResize0] Pos = ${r.grid0.roster[e.item.id].pos[0]}, ${r.grid0.roster[e.item.id].pos[1]}`),core.log(`[BtnResize0] Size = ${r.grid0.roster[e.item.id].size[0]}, ${r.grid0.roster[e.item.id].size[1]}`)}}if(r){i.active=!1,e.item.grid0user.isMoving=!1;const{gridID:t}=e.item.grid0user?e.item.grid0user:{gridID:null};t&&ecs.root[t].saveLocal.save()}}}}},[["render",function(o,d,a,g,c,m){const l=e("touch-pan");return i((s(),t("div",{class:r(["btn-resize-0",{[`btn-resize-0-${a.dir}`]:!0}])},null,2)),[[l,g.pan,void 0,{mouse:!0,stop:!0}]])}],["__scopeId","data-v-553505b2"]]);export{d as default};
